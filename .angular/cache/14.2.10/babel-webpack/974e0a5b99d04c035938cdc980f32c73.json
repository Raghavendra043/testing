{"ast":null,"code":"import _asyncToGenerator from \"D:/Users/raghavendra/Desktop/ODE/OPTH/New folder/testing/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { OIDC_CONTINUE_WITH_ID } from '@utils/globals';\nimport { lastValueFrom } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/oidc-services/oidc-utils.service\";\nimport * as i2 from \"angular-auth-oidc-client\";\nexport let OidcInvalidateSsoSessionComponent = /*#__PURE__*/(() => {\n  class OidcInvalidateSsoSessionComponent {\n    constructor(oidcUtils, oidcSecurityService) {\n      this.oidcUtils = oidcUtils;\n      this.oidcSecurityService = oidcSecurityService;\n      this.OIDC_CONTINUE_WITH_ID_TOKEN = '';\n    }\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        console.debug('OIDC Invalidating SSO Session Component');\n        try {\n          const idToken = yield lastValueFrom(_this.oidcSecurityService.getIdToken());\n          OIDC_CONTINUE_WITH_ID.set(idToken);\n        } catch (e) {\n          console.error('Failed to get ID token');\n          console.error(e);\n        }\n        // Invalidate the OIDC sso session immediately, to avoid being signed in to other services.\n        // The logout request will make sure we are redirected back to this app where the login flow will\n        // continue with verifying the token and logging the user in.\n        _this.oidcUtils.invalidateSsoSession();\n      })();\n    }\n  }\n  OidcInvalidateSsoSessionComponent.ɵfac = function OidcInvalidateSsoSessionComponent_Factory(t) {\n    return new (t || OidcInvalidateSsoSessionComponent)(i0.ɵɵdirectiveInject(i1.OidcUtilsService), i0.ɵɵdirectiveInject(i2.OidcSecurityService));\n  };\n  OidcInvalidateSsoSessionComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OidcInvalidateSsoSessionComponent,\n    selectors: [[\"oidc-invalidate-sso-session\"]],\n    decls: 0,\n    vars: 0,\n    template: function OidcInvalidateSsoSessionComponent_Template(rf, ctx) {}\n  });\n  return OidcInvalidateSsoSessionComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}