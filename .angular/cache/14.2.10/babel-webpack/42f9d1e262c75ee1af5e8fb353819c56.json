{"ast":null,"code":"import { Router } from \"@angular/router\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport let StatePassingService = /*#__PURE__*/(() => {\n  class StatePassingService {\n    constructor(router) {\n      this.router = router;\n      this.currentUser = new CurrentUser();\n      this.params = new Map();\n      this.requestParams = {\n        set: (key, value) => {\n          this.params.set(key, value);\n        },\n        get: key => this.params.get(key),\n        getAndClear: key => {\n          const value = this.params.get(key);\n          if (!this.params.delete(key)) {\n            throw new Error(\"Key does not exist\");\n          }\n          return value;\n        },\n        clearParam: key => {\n          if (this.params.get(key)) {\n            this.params.delete(key);\n          }\n        },\n        containsKey: key => this.params.has(key),\n        clear: () => this.params.clear()\n      };\n    }\n    canActivate() {\n      // Authentication guard\n      if (!this.currentUser.isValid()) {\n        return this.router.createUrlTree([\"/login\"]);\n      } else {\n        return true;\n      }\n    }\n    getUser() {\n      const selectedPatient = this.requestParams.get(\"selectedPatient\");\n      return selectedPatient ? selectedPatient : this.currentUser.get();\n    }\n  }\n  StatePassingService.ɵfac = function StatePassingService_Factory(t) {\n    return new (t || StatePassingService)(i0.ɵɵinject(i1.Router));\n  };\n  StatePassingService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: StatePassingService,\n    factory: StatePassingService.ɵfac,\n    providedIn: \"root\"\n  });\n  return StatePassingService;\n})();\nclass CurrentUser {\n  set(user) {\n    this.user = user;\n  }\n  get() {\n    return this.user;\n  }\n  clear() {\n    delete this.user;\n  }\n  isValid() {\n    var _a;\n    return Boolean(((_a = this.user) === null || _a === void 0 ? void 0 : _a.firstName) && this.user.lastName);\n  }\n}","map":null,"metadata":{},"sourceType":"module"}