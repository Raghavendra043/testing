"use strict";(self.webpackChunkopentele_client_html_angular=self.webpackChunkopentele_client_html_angular||[]).push([[444],{6444:(J,p,n)=>{n.r(p),n.d(p,{SetPinCodeModule:()=>N});var u=n(60),c=n(619),f=n(4815),e=n(5e3),C=n(4338),m=n(1786),g=n(4879),h=n(5066),d=n(3075),v=n(8507);function P(o,a){if(1&o&&(e.TgZ(0,"div",17),e._UZ(1,"i",18),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&o){const i=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,1,i.model.error)," ")}}function T(o,a){if(1&o&&(e.TgZ(0,"div",19),e._UZ(1,"i",20),e._uU(2),e.qZA()),2&o){const i=e.oxw();e.xp6(2),e.hij(" ",i.model.info," ")}}function S(o,a){1&o&&e._UZ(0,"i",21)}const Z=[{path:"",component:(()=>{class o{constructor(i,t,l,s,_){this.appContext=i,this.router=t,this.translate=l,this.authentication=s,this.oidcService=_,this.goBackToLogin=()=>{this.authentication.clearAllTokens(),this.oidcService.sendLogoutRequest(),this.router.navigate(["/login"])},this.getPinCode=()=>{},this.pinCodeMismatch=()=>!this.model.pinCode||this.model.pinCode.length<4||this.model.pinCode!==this.model.pinCodeRepeat,this.savePinCode=()=>{this.model.state="Loading",this.authentication.setPinCode(this.root.links.mfaPinCode,this.model.pinCode).then(r=>(f.oE.set(!0),this.model.state="Loaded",this.completeLogin(r))).catch(r=>{this.model.state="Failed",console.error("Failed to save PIN-code."),console.error(`Data: ${r}`),console.error(JSON.stringify(r)),this.model.pinCode=void 0,this.model.pinCodeRepeat=void 0,this.model.error="LOGIN_FAILED_TO_SET_PIN_CODE"})},this.model={state:"Initial",pinCode:void 0,pinCodeRepeat:void 0,error:"",info:this.translate.instant("SET_PIN_CODE_INFO_TEXT")},this.initModel()}initModel(){this.appContext.requestParams.containsKey("completeLogin")&&this.appContext.requestParams.containsKey("root")?(this.completeLogin=this.appContext.requestParams.getAndClear("completeLogin"),this.root=this.appContext.requestParams.getAndClear("root")):this.router.navigate(["/login"])}}return o.\u0275fac=function(i){return new(i||o)(e.Y36(C.P),e.Y36(c.F0),e.Y36(m.sK),e.Y36(g.$),e.Y36(h.T))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-set-pin-code"]],decls:26,vars:19,consts:[[1,"container"],[3,"showLogo"],[1,"content","space_between"],["class","notification error",4,"ngIf"],["class","notification info",4,"ngIf"],[1,"fill"],["id","pin-code-form","autocomplete","off","autocorrect","off","autocapitalize","off",1,"login_form",3,"ngSubmit"],["pinCodeForm","ngForm"],["id","input-container"],[1,"login_input"],[1,"fal","fa-lock-alt"],["id","pincode","required","","type","text","inputmode","numeric","step","1","size","13","autocomplete","off","autocorrect","off","autocapitalize","off","name","pinCode",1,"pincode",3,"placeholder","ngModel","ngModelChange"],["id","pincode-repeat","required","","type","text","inputmode","numeric","step","1","size","13","autocomplete","off","autocorrect","off","autocapitalize","off","name","pinCodeRepeat",1,"pincode",3,"placeholder","ngModel","ngModelChange"],[1,"button_container"],["type","button",1,"button","cancel",3,"click"],["type","submit","id","save-pin-code",1,"button",3,"disabled"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"notification","error"],[1,"notification_icon","fas","fa-exclamation-triangle"],[1,"notification","info"],[1,"notification_icon","fas","fa-info-circle"],[1,"fa","fa-spinner","fa-spin"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e._UZ(1,"header-menu",1),e.TgZ(2,"div",2),e.YNc(3,P,4,3,"div",3),e.YNc(4,T,3,1,"div",4),e.TgZ(5,"div",5)(6,"form",6,7),e.NdJ("ngSubmit",function(){return t.savePinCode()}),e.TgZ(8,"div",8)(9,"div",9),e._UZ(10,"i",10),e.TgZ(11,"input",11),e.NdJ("ngModelChange",function(s){return t.model.pinCode=s}),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"div",9),e._UZ(14,"i",10),e.TgZ(15,"input",12),e.NdJ("ngModelChange",function(s){return t.model.pinCodeRepeat=s}),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"div",13)(18,"button",14),e.NdJ("click",function(){return t.goBackToLogin()}),e._uU(19),e.ALo(20,"translate"),e.qZA()(),e.TgZ(21,"div",13)(22,"button",15),e._uU(23),e.ALo(24,"translate"),e.YNc(25,S,1,0,"i",16),e.qZA()()()()()()()),2&i&&(e.xp6(1),e.Q6J("showLogo",!0),e.xp6(2),e.Q6J("ngIf",null==t.model?null:t.model.error),e.xp6(1),e.Q6J("ngIf",null==t.model?null:t.model.info),e.xp6(7),e.s9C("placeholder",e.lcZ(12,11,"LOGIN_MFA_PINCODE")),e.Q6J("ngModel",t.model.pinCode),e.xp6(4),e.s9C("placeholder",e.lcZ(16,13,"LOGIN_MFA_PINCODE_REPEAT")),e.Q6J("ngModel",t.model.pinCodeRepeat),e.xp6(4),e.hij(" ",e.lcZ(20,15,"CANCEL")," "),e.xp6(3),e.Q6J("disabled",t.pinCodeMismatch()||"Loading"===t.model.state),e.xp6(1),e.hij(" ","Loading"!==t.model.state?e.lcZ(24,17,"LOGIN_PINCODE_SAVE_BUTTON"):""," "),e.xp6(2),e.Q6J("ngIf","Loading"===t.model.state))},dependencies:[u.O5,d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.On,d.F,v.G,m.X$]}),o})()}];let L=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.Bz.forChild(Z),c.Bz]}),o})();var M=n(4466),A=n(4546);let N=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,L,d.u5,M.m,A.O]}),o})()}}]);