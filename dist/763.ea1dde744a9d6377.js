"use strict";(self.webpackChunkopentele_client_html_angular=self.webpackChunkopentele_client_html_angular||[]).push([[763],{8763:(G,h,n)=>{n.r(h),n.d(h,{ChangePasswordModule:()=>Z});var c=n(60),r=n(3075),u=n(619),e=n(5e3),f=n(4338),C=n(4879),w=n(8507),P=n(1786);function _(o,l){if(1&o&&(e.TgZ(0,"div",6),e._UZ(1,"i",7),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,1,t.model.error)," ")}}const A=function(o){return{padding_when_notification:o}};function M(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"form",8,9),e.NdJ("ngSubmit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.submit())}),e.TgZ(2,"div",10)(3,"div",11),e._UZ(4,"i",12),e.TgZ(5,"input",13,14),e.NdJ("ngModelChange",function(a){e.CHM(t);const d=e.oxw();return e.KtG(d.model.currentPassword=a)}),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div",11),e._UZ(9,"i",15),e.TgZ(10,"input",16,17),e.NdJ("ngModelChange",function(a){e.CHM(t);const d=e.oxw();return e.KtG(d.model.password=a)}),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"div",11),e._UZ(14,"i",18),e.TgZ(15,"input",19,20),e.NdJ("ngModelChange",function(a){e.CHM(t);const d=e.oxw();return e.KtG(d.model.passwordRepeat=a)}),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",21)(19,"button",22),e._uU(20),e.ALo(21,"translate"),e.qZA()()()()}if(2&o){const t=e.MAs(1),s=e.oxw();e.Q6J("ngClass",e.VKq(17,A,s.model.error)),e.xp6(5),e.s9C("placeholder",e.lcZ(7,9,"CHANGE_PASSWORD_FORM_CURRENT")),e.Q6J("ngModel",s.model.currentPassword),e.xp6(5),e.s9C("placeholder",e.lcZ(12,11,"CHANGE_PASSWORD_FORM_NEW")),e.Q6J("ngModel",s.model.password),e.xp6(5),e.s9C("placeholder",e.lcZ(17,13,"CHANGE_PASSWORD_FORM_REPEAT")),e.Q6J("ngModel",s.model.passwordRepeat),e.xp6(4),e.Q6J("disabled",!t.form.valid),e.xp6(1),e.hij(" ",e.lcZ(21,15,"CHANGE_PASSWORD_FORM_CHANGE_BUTTON")," ")}}const v=[{path:"",component:(()=>{class o{constructor(t,s,a){this.appContext=t,this.authentication=s,this.router=a,this.model={showProgress:!1},this.tryChangePassword=()=>{if(this.model.currentPassword==this.model.password)return void(this.model.error="CHANGE_PASSWORD_UNIQUE");this.model.showProgress=!0;const i=this.appContext.currentUser.get(),p=this.appContext.requestParams.get("userInfo");this.authentication.changePassword((null==i?void 0:i.username)||p.username,(null==i?void 0:i.links.changePassword)||p.changePasswordUrl,this.model.currentPassword,this.model.password).subscribe({next:()=>{this.model.showProgress=!1,this.router.navigate(["login"])},error:m=>{var g;const S=m.data,N=m.status;switch(this.model.showProgress=!1,N){case 400:{const O=null===(g=S.errors)||void 0===g?void 0:g[0].error.toUpperCase();this.model.error=`CHANGE_PASSWORD_${O}`;break}case 401:this.model.error="BAD_CREDENTIALS";break;default:this.model.error="OPENTELE_DOWN_TEXT"}}})}}ngOnInit(){this.appContext.requestParams.containsKey("forceChange")&&!0===this.appContext.requestParams.getAndClear("forceChange")?(this.model.forceChange=!0,this.model.error="CHANGE_PASSWORD_EXPIRED"):this.model.forceChange=!1}changeIfValid(){this.model.password!==this.model.passwordRepeat?this.model.error="CHANGE_PASSWORD_FORM_ERROR_MATCH":this.tryChangePassword()}submit(){delete this.model.error,this.changeIfValid()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.P),e.Y36(C.$),e.Y36(u.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-change-password"]],viewQuery:function(t,s){if(1&t&&e.Gf(r.F,5),2&t){let a;e.iGM(a=e.CRH())&&(s.ngForm=a.first)}},decls:6,vars:4,consts:[[1,"container"],[3,"title","showBackBtn"],[1,"content"],["class","notification error",4,"ngIf"],[1,"fill"],["id","change-password-form","class","login_form","autocomplete","off","spellcheck","false","autocapitalize","off",3,"ngClass","ngSubmit",4,"ngIf"],[1,"notification","error"],[1,"notification_icon","fas","fa-exclamation-triangle"],["id","change-password-form","autocomplete","off","spellcheck","false","autocapitalize","off",1,"login_form",3,"ngClass","ngSubmit"],["changePasswordForm","ngForm"],["id","input-container"],[1,"login_input"],[1,"fal","fa-lock-open-alt"],["id","current-password","required","","autofocus","","name","currentPassword","type","text","size","13","autocomplete","off","spellcheck","false","autocapitalize","off",1,"password",3,"ngModel","placeholder","ngModelChange"],["currentPassword","ngModel"],[1,"fal","fa-unlock-alt"],["id","new-password","required","","autofocus","true","name","password","type","text","size","13","autocomplete","off","autocorrect","off","autocapitalize","off",1,"password",3,"ngModel","placeholder","ngModelChange"],["password","ngModel"],[1,"fal","fa-lock-alt"],["id","new-password-repeat","required","","name","passwordRepeat","type","text","size","13","autocomplete","off","autocorrect","off","autocapitalize","off",1,"password",3,"ngModel","placeholder","ngModelChange"],["passwordRepeat","ngModel"],[1,"button_container"],["id","submit","type","submit",1,"button",3,"disabled"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"header-menu",1),e.TgZ(2,"div",2),e.YNc(3,_,4,3,"div",3),e.TgZ(4,"div",4),e.YNc(5,M,22,19,"form",5),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("title","CHANGE_PASSWORD_TITLE")("showBackBtn",!0),e.xp6(2),e.Q6J("ngIf",s.model.error),e.xp6(2),e.Q6J("ngIf",!s.model.showProgress))},dependencies:[c.mk,c.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.On,r.F,w.G,P.X$]}),o})()}];let x=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.Bz.forChild(v),u.Bz]}),o})();var R=n(4546),T=n(4466);let Z=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.ez,x,r.u5,R.O,T.m]}),o})()}}]);